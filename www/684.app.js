"use strict";(self.webpackChunktiny_tonnetz=self.webpackChunktiny_tonnetz||[]).push([[684],{684:(n,t,e)=>{e.r(t),e.d(t,{tiny_tonnetz:()=>k,tiny_tonnetz_cell:()=>x});var r=e(758),i=e(894);function o(n){return function(t,e){const r=t.constructor.name,i=t.componentWillLoad;let o=t[e],a=!0;function s(){var t;const i=null!==(t=this[n])&&void 0!==t?t:"";return i?`${i}-${r}-${e}`:`${r}-${e}`}t.componentWillLoad=function(){i&&i.call(this);const n=localStorage.getItem(s.call(this));null!==n&&(this[e]=JSON.parse(n)),a=!1},Object.defineProperty(t,e,{get:()=>o,set(n){o=n,a||localStorage.setItem(s.call(this),JSON.stringify(n))},configurable:!0,enumerable:!0})}}function a(n){return(null==n?void 0:n.length)>0}function s(n){return l(n)>0}function l(n){var t;return(null===(t=null==n?void 0:n.filter((n=>n.state===i.N.PRESSED)))||void 0===t?void 0:t.length)||0}function h(n,t){return T(n,t)||u(n,t)}function c(n,t){var e,r,o;return function(n,t){return u(n,t)||T(n,t)||b(n,t)}(n,t)&&!(null===(e=null==n?void 0:n[(i.S+t-i.a.MINOR_THIRD)%i.S])||void 0===e?void 0:e.length)&&!(null===(r=null==n?void 0:n[(i.S+t-i.a.MAJOR_THIRD)%i.S])||void 0===r?void 0:r.length)&&!(null===(o=null==n?void 0:n[(i.S+t-i.a.PERFECT_FIFTH)%i.S])||void 0===o?void 0:o.length)}function d(n,t){return u(n,t)&&b(n,t)}function v(n,t){return T(n,t)&&b(n,t)}function u(n,t){var e;return a(n[t])&&(null===(e=null==n?void 0:n[(t+i.a.MINOR_THIRD)%i.S])||void 0===e?void 0:e.length)>0}function _(n,t){var e,r;return s(n[t])&&(null===(r=null===(e=null==n?void 0:n[(t+i.a.MINOR_THIRD)%i.S])||void 0===e?void 0:e.filter((n=>n.state===i.N.PRESSED)))||void 0===r?void 0:r.length)}function T(n,t){var e;return a(n[t])&&(null===(e=null==n?void 0:n[(t+i.a.MAJOR_THIRD)%i.S])||void 0===e?void 0:e.length)>0}function g(n,t){var e,r;return s(n[t])&&(null===(r=null===(e=null==n?void 0:n[(t+i.a.MAJOR_THIRD)%i.S])||void 0===e?void 0:e.filter((n=>n.state===i.N.PRESSED)))||void 0===r?void 0:r.length)}function b(n,t){var e;return a(n[t])&&(null===(e=null==n?void 0:n[(t+i.a.PERFECT_FIFTH)%i.S])||void 0===e?void 0:e.length)>0}function m(n,t){var e,r;return s(n[t])&&(null===(r=null===(e=null==n?void 0:n[(t+i.a.PERFECT_FIFTH)%i.S])||void 0===e?void 0:e.filter((n=>n.state===i.N.PRESSED)))||void 0===r?void 0:r.length)}const p={[i.b.ENGLISH]:["C","#","D","#","E","F","#","G","#","A","#","B"],[i.b.LATIN]:["Do","#","RÃ©","#","Mi","Fa","#","Sol","#","La","#","Si"]};function f(n){return n.map(((t,e)=>"#"===t?`${n[(i.S+e-1)%i.S]}â™¯ ${n[(i.S+e+1)%i.S]}b`:t))}var y=function(n,t,e,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,t,e,r);else for(var s=n.length-1;s>=0;s--)(i=n[s])&&(a=(o<3?i(a):o>3?i(t,e,a):i(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a};const k=class{constructor(n){(0,r.r)(this,n),this.activeNotes={},this.centralClusterMargin=1,this.iscontrolsVisible=!0,this.isScalingEnabled=!0,this.scale=1,this.isLightTheme=!1,this.isDarkTheme=!1,this.isTracing=!1,this.noteNamingConvention=i.b.ENGLISH,this.noteNamingConventionOptions=[i.b.ENGLISH,i.b.LATIN],this.hasNoTransition=!1,this.size={width:0,height:0}}get id(){return this.el.id}clampScale(n){this.scale=Math.min(Math.max(n,k.SCALE_MIN),k.SCALE_MAX)}updateCentralClusterMargin(n){this.minHorizontalCount=k.CLUSTER_HORIZONTAL_COUNT+2*n,this.minVerticalCount=k.CLUSTER_VERTICAL_COUNT+2*n}handleScroll(n){if(this.isScalingEnabled){let t;switch(n.deltaMode){case WheelEvent.DOM_DELTA_PIXEL:t=n.deltaY/100;break;case WheelEvent.DOM_DELTA_LINE:t=n.deltaY>0?1:-1;break;case WheelEvent.DOM_DELTA_PAGE:t=n.deltaY>0?100:-100}this.scale-=t*k.SCALE_WHEEL_STEP}}componentWillLoad(){this.clampScale(this.scale),this.updateCentralClusterMargin(this.centralClusterMargin)}connectedCallback(){this.initResizeObserver()}disconnectedCallback(){this.cleanupResizeObserver()}initResizeObserver(){this.resizeObserver=new ResizeObserver((n=>{for(let t of n){const{width:n,height:e}=t.contentRect;this.size={width:n,height:e}}})),this.resizeObserver.observe(this.el)}cleanupResizeObserver(){this.resizeObserver&&this.resizeObserver.disconnect()}generateGrid(){const n=i.a.MAJOR_THIRD/i.a.MINOR_THIRD,t=120,e=t/n;let o,a=this.minVerticalCount,s=this.minHorizontalCount,l=this.size.width/this.size.height;l>s*t/(a*e)?(o=this.size.height/(a*e),s=Math.floor(s*l)):(o=this.size.width/(s*t),a=Math.floor(a/l*n)),s=Math.floor(s/this.scale+2),a=Math.floor(a/this.scale+2);const h=this.generateCells(s,a,t,e);return(0,r.h)("div",{style:{transform:`scale(${this.scale*o})`}},h)}generateCells(n,t,e,o){let s;const p=[],f=[],y=this.minHorizontalCount%2==0,k=this.minVerticalCount%2==0,C=Math.floor(n/2),z=Math.floor(t/2),S=-z,x=-C,E=z+(k?0:1),N=C+(y?0:1),I=function(n){const t={};return Object.entries(n).forEach((([e,r])=>{const o=Number(e);var s,p,f;t[o]={isActive:a(r),state:(s=r,(null===(p=s.find((n=>n.state===i.N.PRESSED)))||void 0===p?void 0:p.state)||(null===(f=s.find((n=>n.state===i.N.SUSTAINED)))||void 0===f?void 0:f.state)||i.N.RELEASED),count:l(r),hasChordActive:h(n,o),isChordRoot:c(n,o),isMinorChordActive:d(n,o),isMajorChordActive:v(n,o),isPerfectFifthIntervalActive:b(n,o),isPerfectFifthIntervalPressed:m(n,o),isMajorThirdIntervalActive:T(n,o),isMajorThirdIntervalPressed:g(n,o),isMinorThirdIntervalActive:u(n,o),isMinorThirdIntervalPressed:_(n,o)}})),t}(this.activeNotes);for(let n=S;n<E;n++)for(let t=x;t<N;t++){const i=this.getSemiToneCodeFromCoordinates(t,n);let a=t*e,l=n*-o;y&&(a+=e/2),k&&(l-=o/2),n===S&&this.hasVerticalClusterSeparator(t)&&f.push(this.createClusterSeparator(a,e)),t===x&&this.hasHorizontalClusterSeparator(n)&&f.push(this.createClusterSeparator(l,o,!0)),p.push(this.createCell(I,i,a,l,e,o)),-1===t&&-2===n&&(s=(0,r.h)("div",{class:"tinyTonnetz_legend",style:{translate:`${a}px ${l}px`}},(0,r.h)("div",{class:"tinyTonnetz_legend_minorThird"},"3 ðŸ¡†"),(0,r.h)("div",{class:"tinyTonnetz_legend_majorThird"},"4 ðŸ¡†"),(0,r.h)("div",{class:"tinyTonnetz_legend_perfectFifth"},"ðŸ¡„ 5")))}return[p,f,s]}hasHorizontalClusterSeparator(n){return(n-1)%k.CLUSTER_VERTICAL_COUNT==0}hasVerticalClusterSeparator(n){return(n+1)%k.CLUSTER_HORIZONTAL_COUNT==0}getSemiToneCodeFromCoordinates(n,t){let e=(n*i.a.MAJOR_THIRD+t*i.a.MINOR_THIRD)%12;return e<0&&(e+=12),e}createClusterSeparator(n,t,e=!1){let i=t/2;return i-=e?Math.floor(k.CLUSTER_VERTICAL_COUNT/2-1)*t:Math.floor(k.CLUSTER_HORIZONTAL_COUNT/2)*t,(0,r.h)("div",{class:{tinyTonnetz_clusterSeparator:!0,"-horizontal":e},style:{transform:`translate(${n+i}px, -50%)`}})}createCell(n,t,e,i,o,a){return(0,r.h)("tiny-tonnetz-cell",{key:`${e}-${i}`,cellStates:n,width:o,height:a,semiToneCode:t,noteNamingConvention:this.noteNamingConvention,isTracing:this.isTracing,hasNoTransition:this.hasNoTransition,style:{position:"absolute",translate:`${e}px ${i}px`}})}render(){return this.size.width&&this.size.height?(0,r.h)(r.H,{style:{colorScheme:this.isLightTheme?"light":this.isDarkTheme?"dark":"light dark"}},(0,r.h)("div",{class:"tinyTonnetz_anchor"},this.generateGrid()),this.iscontrolsVisible?(0,r.h)("div",{class:"tinyTonnetz_controls"},(0,r.h)("div",{class:"tinyTonnetz_themeSwitcher"},this.noteNamingConventionOptions.map((n=>(0,r.h)("button",{class:{"-active":this.noteNamingConvention===n},onClick:()=>{this.noteNamingConvention=n}},p[n][0])))),(0,r.h)("div",{class:"tinyTonnetz_themeSwitcher"},(0,r.h)("button",{class:{"-active":!this.isTracing},onClick:()=>{this.isTracing=!1}},"0s"),(0,r.h)("button",{class:{"-active":this.isTracing},onClick:()=>{this.isTracing=!0}},"5s")),(0,r.h)("div",{class:"tinyTonnetz_themeSwitcher -icons"},(0,r.h)("button",{class:{"-active":this.isLightTheme&&!this.isDarkTheme},onClick:()=>{this.hasNoTransition=!0,this.isLightTheme=!0,this.isDarkTheme=!1,requestAnimationFrame((()=>{this.hasNoTransition=!1}))}},"â˜€"),(0,r.h)("button",{class:{"-active":!this.isLightTheme&&!this.isDarkTheme},onClick:()=>{this.hasNoTransition=!0,this.isLightTheme=!1,this.isDarkTheme=!1,requestAnimationFrame((()=>{this.hasNoTransition=!1}))}},"â‡…"),(0,r.h)("button",{class:{"-active":!this.isLightTheme&&this.isDarkTheme},onClick:()=>{this.hasNoTransition=!0,this.isLightTheme=!1,this.isDarkTheme=!0,requestAnimationFrame((()=>{this.hasNoTransition=!1}))}},"â˜…")),this.isScalingEnabled?(0,r.h)("div",null,(0,r.h)("input",{class:"tinyTonnetz_scaleSlider",type:"range",min:k.SCALE_MIN,max:k.SCALE_MAX,step:"any",list:"markers",value:this.scale,onInput:n=>this.scale=parseFloat(n.target.value)}),(0,r.h)("datalist",{id:"markers"},(0,r.h)("option",{value:k.SCALE_MIN,label:"-"}),(0,r.h)("option",{value:"1",label:"1"}),(0,r.h)("option",{value:k.SCALE_MAX,label:"+"}))):null):null):(0,r.h)(r.H,null,"...")}get el(){return(0,r.g)(this)}static get watchers(){return{scale:["clampScale"],centralClusterMargin:["updateCentralClusterMargin"]}}};k.HORIZONTAL_SEMI_TONE_UNIT=4,k.VERTICAL_SEMI_TONE_UNIT=3,k.CLUSTER_HORIZONTAL_COUNT=i.S/k.HORIZONTAL_SEMI_TONE_UNIT,k.CLUSTER_VERTICAL_COUNT=i.S/k.VERTICAL_SEMI_TONE_UNIT,k.SCALE_MIN=.5,k.SCALE_MAX=1.5,k.SCALE_WHEEL_STEP=.125,y([o("id")],k.prototype,"scale",void 0),y([o("id")],k.prototype,"isLightTheme",void 0),y([o("id")],k.prototype,"isDarkTheme",void 0),y([o("id")],k.prototype,"isTracing",void 0),y([o("id")],k.prototype,"noteNamingConvention",void 0),k.style=":host {\r\n  --tinyTonnetz_theme_background: light-dark(#e7e7e7, #444);\r\n  --tinyTonnetz_theme_clusterSeparator: light-dark(#0004, #0004);\r\n  --tinyTonnetz_theme_legendText: light-dark(#cbcbcb, #535353);\r\n\r\n  --tinyTonnetz_theme_controls_border: light-dark(#9f9f9f, #000);\r\n  --tinyTonnetz_theme_controls_active: light-dark(#3e3e3e, #b7b7b7);\r\n  --tinyTonnetz_theme_controls_background: light-dark(#e1e1e1, #222);\r\n  --tinyTonnetz_theme_controls_shadow: 0 4px 8px light-dark(#0004, #0008);\r\n\r\n  display: block;\r\n  position: relative;\r\n  background: var(--tinyTonnetz_theme_background);\r\n  overflow: hidden;\r\n  max-height: 100vh;\r\n  max-width: 100vw;\r\n  aspect-ratio: 1;\r\n}\r\n\r\n.tinyTonnetz_anchor {\r\n  position: relative;\r\n  overflow: visible;\r\n  width: 0;\r\n  height: 0;\r\n  top: 50%;\r\n  left: 50%;\r\n}\r\n\r\n.tinyTonnetz_controls {\r\n  position: absolute;\r\n  bottom: 10px;\r\n  right: 10px;\r\n  z-index: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 10px;\r\n  font-family: sans-serif;\r\n}\r\n\r\n.tinyTonnetz_themeSwitcher {\r\n  display: flex;\r\n  flex-direction: column;\r\n  border: 1px solid var(--tinyTonnetz_theme_controls_border);\r\n  border-radius: 10px;\r\n  width: 30px;\r\n  overflow: hidden;\r\n  box-shadow: var(--tinyTonnetz_theme_controls_shadow);\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n  background: light-dark(#c9c9c9, #444);\r\n  gap: 1px;\r\n\r\n  &.-icons {\r\n    font-size: 18px;\r\n    font-weight: normal;\r\n  }\r\n\r\n  > * {\r\n    border: none;\r\n    width: 100%;\r\n    aspect-ratio: 1;\r\n    font-size: inherit;\r\n    font-weight: inherit;\r\n    color: light-dark(#585858, #9b9b9b);\r\n    background: var(--tinyTonnetz_theme_controls_background);\r\n\r\n    &:hover,\r\n    &.-active {\r\n      background: var(--tinyTonnetz_theme_controls_active);\r\n      color: light-dark(white, black);\r\n    }\r\n  }\r\n}\r\n\r\n.tinyTonnetz_scaleSlider {\r\n  height: 100px;\r\n  writing-mode: vertical-lr;\r\n  direction: rtl;\r\n\r\n  -webkit-appearance: none;\r\n  background: transparent;\r\n\r\n  &::-webkit-slider-thumb {\r\n    -webkit-appearance: none;\r\n    height: 18px;\r\n    width: 18px;\r\n    border-radius: 50%;\r\n    border: 3px solid var(--tinyTonnetz_theme_controls_background);\r\n    background: var(--tinyTonnetz_theme_controls_active);\r\n    cursor: pointer;\r\n    box-sizing: border-box;\r\n  }\r\n\r\n  &::-moz-range-thumb {\r\n    -webkit-appearance: none;\r\n    height: 18px;\r\n    width: 18px;\r\n    border-radius: 50%;\r\n    border: 3px solid var(--tinyTonnetz_theme_controls_background);\r\n    background: var(--tinyTonnetz_theme_controls_active);\r\n    cursor: pointer;\r\n    box-sizing: border-box;\r\n  }\r\n\r\n  &::-webkit-slider-runnable-track {\r\n    background: var(--tinyTonnetz_theme_controls_background);\r\n    height: 100%;\r\n    width: 20px;\r\n    border-radius: 10px;\r\n    cursor: pointer;\r\n    box-shadow: var(--tinyTonnetz_theme_controls_shadow);\r\n    border: 1px solid var(--tinyTonnetz_theme_controls_border);\r\n  }\r\n\r\n  &::-moz-range-track {\r\n    background: var(--tinyTonnetz_theme_controls_background);\r\n    height: 100%;\r\n    width: 20px;\r\n    border-radius: 10px;\r\n    cursor: pointer;\r\n    box-shadow: var(--tinyTonnetz_theme_controls_shadow);\r\n    border: 1px solid var(--tinyTonnetz_theme_controls_border);\r\n  }\r\n}\r\n\r\n.tinyTonnetz_clusterSeparator {\r\n  position: absolute;\r\n  border-left: 1px solid var(--tinyTonnetz_theme_clusterSeparator);\r\n  height: 10000vmax;\r\n  transform-origin: top;\r\n\r\n  &.-horizontal {\r\n    rotate: 270deg;\r\n  }\r\n}\r\n\r\n.tinyTonnetz_legend {\r\n  position: absolute;\r\n  font-family: sans-serif;\r\n  font-weight: bold;\r\n  font-size: 9px;\r\n  line-height: 1;\r\n  color: var(--tinyTonnetz_theme_legendText);\r\n}\r\n\r\n.tinyTonnetz_legend_minorThird {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  width: max-content;\r\n  transform: translateY(-50%) rotate(270deg) translateX(30px);\r\n  transform-origin: left center;\r\n}\r\n\r\n.tinyTonnetz_legend_majorThird {\r\n  position: absolute;\r\n  width: max-content;\r\n  transform: translateY(-50%) translateX(30px);\r\n}\r\n\r\n.tinyTonnetz_legend_perfectFifth {\r\n  position: absolute;\r\n  width: max-content;\r\n  transform: translateX(-100%) translateY(-50%) rotate(323deg) translateX(-32px);\r\n  transform-origin: right center;\r\n}\r\n";const C={[i.b.LATIN]:z(f(p.LATIN)),[i.b.ENGLISH]:z(f(p.ENGLISH))};function z(n){return n.map((n=>n.replace(/(\p{L}+)([â™¯b])/gu,"<span>$1<sup>$2</sup></span>")))}function S(n,t){return C[t][n]}const x=class{constructor(n){(0,r.r)(this,n),this.semiToneCode=0,this.noteNamingConvention=i.b.ENGLISH,this.isTracing=!1,this.hasNoTransition=!1}render(){var n,t,e,o,a,s,l,h,c,d,v,u,_,T,g,b,m,p,f;return(0,r.h)(r.H,{key:"1e457bc80c392529c8698055e157491b66cef885"},(0,r.h)("svg",{key:"01088b73004c6ac2091cbb7352180fd1ce4f0aad",class:"cell_background",width:this.width,height:this.height},(0,r.h)("defs",{key:"dba4b6d520590f8bfdd0bb7b24e7fea003eca743"},(0,r.h)("linearGradient",{key:"1d8c632c85844400b6992b13c1ddf310aee1011f",class:"cell_majorGradient",id:"major-grad",x1:"100%",y1:"100%",x2:"0%",y2:"0%"},(0,r.h)("stop",{key:"351dce77633ecb3d2e94a9eaf0c29222140a5460",offset:"0%"}),(0,r.h)("stop",{key:"617b85d1d56b4a478e54bbbf2077d18fe890b5c2",offset:"50%"})),(0,r.h)("linearGradient",{key:"94f3c19e94be643e9d1d041b0b1a23476dd8ddb1",class:"cell_minorGradient",id:"minor-grad",x1:"0%",y1:"0",x2:"100%",y2:"100%"},(0,r.h)("stop",{key:"943d3cc82dcd00b2bb9fe0ee384cbf140741aa2e",offset:"0%"}),(0,r.h)("stop",{key:"7869f4343f8674bd2e61fe5d4ed92eb417df6e53",offset:"50%"}))),(0,r.h)("polygon",{key:"d6356f268135c4a5b8d237e520d800eebbf1a3dd",points:`0,${this.height} ${this.width},0 ${this.width},${this.height}`,class:{cell_majorChord:!0,"-active":null===(n=this.cellStates[this.semiToneCode])||void 0===n?void 0:n.isMajorChordActive}}),(0,r.h)("polygon",{key:"9445c7489c6686281ae05d5b7d332843e62985d3",points:`0,0 0,${this.height} ${this.width},0`,class:{cell_minorChord:!0,"-active":null===(t=this.cellStates[this.semiToneCode])||void 0===t?void 0:t.isMinorChordActive}}),(0,r.h)("line",{key:"6914cbd5d5bce5afe0f0b26e055eea7396a29add",x1:0,y1:this.height,x2:0,y2:0,class:{"-active":null===(e=this.cellStates[this.semiToneCode])||void 0===e?void 0:e.isMinorThirdIntervalActive,"-pressed":null===(o=this.cellStates[this.semiToneCode])||void 0===o?void 0:o.isMinorThirdIntervalPressed,"-trace":this.isTracing,"-noTransition":this.hasNoTransition}}),(0,r.h)("line",{key:"a4082e2844c138cd81058e31a176764a4c7f6a54",x1:0,y1:this.height,x2:this.width,y2:this.height,class:{"-active":null===(a=this.cellStates[this.semiToneCode])||void 0===a?void 0:a.isMajorThirdIntervalActive,"-pressed":null===(s=this.cellStates[this.semiToneCode])||void 0===s?void 0:s.isMajorThirdIntervalPressed,"-trace":this.isTracing,"-noTransition":this.hasNoTransition}}),(0,r.h)("line",{key:"4c5d5e21387242fb229b06fd4707a27aa90d00e3",x1:0,y1:this.height,x2:this.width,y2:0,class:{"-active":null===(l=this.cellStates[this.semiToneCode])||void 0===l?void 0:l.isPerfectFifthIntervalActive,"-pressed":null===(h=this.cellStates[this.semiToneCode])||void 0===h?void 0:h.isPerfectFifthIntervalPressed,"-chordActive":null===(c=this.cellStates[this.semiToneCode])||void 0===c?void 0:c.hasChordActive,"-trace":this.isTracing,"-noTransition":this.hasNoTransition}})),(0,r.h)("div",{key:"142e4b9eb9ada0ce3aa0857498ef761271a61949",class:{cell_node:!0,"-blackKey":(f=this.semiToneCode,i.B.includes(f)),"-active":null===(d=this.cellStates[this.semiToneCode])||void 0===d?void 0:d.isActive,"-chordRoot":null===(v=this.cellStates[this.semiToneCode])||void 0===v?void 0:v.isChordRoot,"-minorThird":null===(u=this.cellStates[this.semiToneCode])||void 0===u?void 0:u.isMinorThirdIntervalActive,"-majorThird":null===(_=this.cellStates[this.semiToneCode])||void 0===_?void 0:_.isMajorThirdIntervalActive,"-minorChord":null===(T=this.cellStates[this.semiToneCode])||void 0===T?void 0:T.isMinorChordActive,"-majorChord":null===(g=this.cellStates[this.semiToneCode])||void 0===g?void 0:g.isMajorChordActive,"-pressed":(null===(b=this.cellStates[this.semiToneCode])||void 0===b?void 0:b.state)===i.N.PRESSED,"-completelyPressed":(null===(m=this.cellStates[this.semiToneCode])||void 0===m?void 0:m.count)>1,"-trace":this.isTracing,"-noTransition":this.hasNoTransition},style:{"--count":""+((null===(p=this.cellStates[this.semiToneCode])||void 0===p?void 0:p.count)-1)},innerHTML:S(this.semiToneCode,this.noteNamingConvention)}))}};x.style="tiny-tonnetz-cell {\r\n  --tinyTonnetz_theme_cell_text: light-dark(#c7c6c6, #3c3c3c);\r\n  --tinyTonnetz_theme_cell_text--blackKey: light-dark(#f3f3f3, #585858);\r\n  --tinyTonnetz_theme_cell_background: light-dark(#f3f3f3, #4c4c4c);\r\n  --tinyTonnetz_theme_cell_background--blackKey: light-dark(#cbcbcb, #3a3a3a);\r\n\r\n  --tinyTonnetz_theme_cell_text--active: light-dark(#000, #000);\r\n  --tinyTonnetz_theme_cell_text--active-blackKey: light-dark(#ddd, #9d9d9d);\r\n  --tinyTonnetz_theme_cell_background--active: light-dark(#fff, #c7c7c7);\r\n  --tinyTonnetz_theme_cell_background--active-blackKey: light-dark(#434343, #1e1e1e);\r\n\r\n  --tinyTonnetz_theme_link: light-dark(#e3e3e3, #424242);\r\n  --tinyTonnetz_theme_link--active: light-dark(#333, #222);\r\n  --tinyTonnetz_theme_link--pressed: light-dark(#000, #000);\r\n\r\n  --tinyTonnetz_trace_duration: 5s;\r\n  --tinyTonnetz_trace_timingFunction: cubic-bezier(0, 1.11, 1, 0.55);\r\n\r\n  pointer-events: none;\r\n}\r\n\r\n.cell_node {\r\n  --level: 0px;\r\n  --scale: 1;\r\n  --count: 0;\r\n\r\n  pointer-events: initial;\r\n  overflow: hidden;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 0 2%;\r\n  box-sizing: border-box;\r\n  justify-content: center;\r\n  align-items: center;\r\n  text-align: center;\r\n  background: var(--tinyTonnetz_theme_cell_background);\r\n  color: var(--tinyTonnetz_theme_cell_text);\r\n  border-radius: 25%;\r\n  transform: translate(-50%, -50%) translateY(calc(0px - var(--level))) scale(var(--scale));\r\n  font-size: 15px;\r\n  font-family: sans-serif;\r\n  font-weight: bold;\r\n  border: 2px solid transparent;\r\n  outline: calc(6px * var(--count)) solid transparent;\r\n  transition-property: transform, box-shadow, background-color, color, border, outline-width, outline-color;\r\n  transition-duration: 100ms;\r\n\r\n  &.-trace {\r\n    transition-duration: var(--tinyTonnetz_trace_duration);\r\n    transition-timing-function: var(--tinyTonnetz_trace_timingFunction);\r\n  }\r\n\r\n  &.-noTransition {\r\n    transition: none;\r\n  }\r\n\r\n  height: 34px;\r\n  aspect-ratio: 1;\r\n\r\n  &.-blackKey {\r\n    justify-content: space-between;\r\n    background: var(--tinyTonnetz_theme_cell_background--blackKey);\r\n    color: var(--tinyTonnetz_theme_cell_text--blackKey);\r\n    font-size: 9px;\r\n  }\r\n\r\n  & :first-child {\r\n    align-self: flex-start;\r\n  }\r\n\r\n  & :last-child {\r\n    align-self: flex-end;\r\n  }\r\n\r\n  &.-active {\r\n    --level: 2px;\r\n    box-shadow:\r\n      0 var(--level) calc(var(--level)) #0002,\r\n      0 calc(var(--level) * 2) calc(var(--level)) #0004,\r\n      0 var(--level) 0 #000;\r\n    background: var(--tinyTonnetz_theme_cell_background--active);\r\n    color: var(--tinyTonnetz_theme_cell_text--active);\r\n    border-color: #000;\r\n    outline-color: #0004;\r\n    transition-duration: 100ms;\r\n\r\n    &.-blackKey {\r\n      background: var(--tinyTonnetz_theme_cell_background--active-blackKey);\r\n      color: var(--tinyTonnetz_theme_cell_text--active-blackKey);\r\n    }\r\n\r\n    &:not(.-pressed) { --level: 6px }\r\n    &.-completelyPressed { --level: 0px }\r\n  }\r\n\r\n  &.-chordRoot {\r\n    --scale: 1.1;\r\n    --root-hue: 162;\r\n    background: light-dark(hsl(var(--root-hue), 100%, 82%), hsl(var(--root-hue), 50%, 64%));\r\n\r\n    &.-blackKey {\r\n      background: light-dark(hsl(var(--root-hue) 42% 50%), hsl(var(--root-hue) 38% 38%));\r\n      color: light-dark(hsl(var(--root-hue), 100%, 92%), hsl(var(--root-hue), 70%, 70%));\r\n    }\r\n\r\n    &.-minorThird { --root-hue: 344 }\r\n    &.-majorThird { --root-hue: 273 }\r\n    &.-minorChord { --root-hue: 220 }\r\n    &.-majorChord { --root-hue: 23 }\r\n\r\n    &.-minorThird.-majorThird,\r\n    &.-minorChord.-majorChord {\r\n      background: light-dark(hsl(0, 0%, 85%), hsl(0, 0%, 55%));\r\n\r\n      &.-blackKey {\r\n        background: light-dark(hsl(0 0% 50%), hsl(0 0% 20%));\r\n        color: light-dark(hsl(0, 0%, 95%), hsl(0, 0%, 60%));\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.cell_background {\r\n  transform: translateY(-100%);\r\n  overflow: visible;\r\n  pointer-events: none;\r\n\r\n  line {\r\n    stroke-width: 8px;\r\n    stroke: var(--tinyTonnetz_theme_link);\r\n    stroke-dasharray: 22, 0;\r\n    transition-property: stroke, stroke-width, stroke-dasharray;\r\n    transition-duration: 100ms;\r\n\r\n    &.-trace {\r\n      transition-duration: var(--tinyTonnetz_trace_duration);\r\n      transition-timing-function: var(--tinyTonnetz_trace_timingFunction);\r\n    }\r\n\r\n    &.-noTransition {\r\n      transition: none;\r\n    }\r\n\r\n    &.perfectFifth {\r\n      stroke-width: 4px;\r\n    }\r\n\r\n    &.-active {\r\n      stroke-width: 12px;\r\n      stroke: var(--tinyTonnetz_theme_link--active);\r\n      transition-duration: 100ms;\r\n\r\n      &.-chordActive {\r\n        stroke-width: 1px;\r\n        stroke-dasharray: 16, 6;\r\n      }\r\n    }\r\n\r\n    &.-pressed {\r\n      stroke-width: 14px;\r\n      stroke: var(--tinyTonnetz_theme_link--pressed);\r\n    }\r\n  }\r\n}\r\n\r\n.cell_minorGradient,\r\n.cell_majorGradient {\r\n  stop {\r\n    &:first-child { stop-opacity: .5 }\r\n    &:last-child { stop-opacity: 0 }\r\n  }\r\n}\r\n\r\n.cell_minorGradient stop {\r\n  stop-color: light-dark(hsl(220 50% 40%), hsl(220 100% 73%));\r\n}\r\n\r\n.cell_majorGradient stop {\r\n  stop-color: light-dark(hsl(30 70% 50%), hsl(30 100% 73%));\r\n}\r\n\r\n.cell_minorChord {\r\n  fill: none;\r\n\r\n  &.-active {\r\n    fill: url(#minor-grad);\r\n  }\r\n}\r\n\r\n.cell_majorChord {\r\n  fill: none;\r\n  &.-active {\r\n    fill: url(#major-grad);\r\n  }\r\n}\r\n"}}]);